<div id="tplManageNetwork">
	<script type="text/javascript">
		$(document)
				.ready(
						function() {
							
							
							var selectProfileID = null;
							var selectDeviceID = null;
							var idTblOnFire = null;
							var rtnObjConfig, tmpObjConfig = {};
							var controlAllOk = true;
							var controlSomeMod = false;
							var fieldToVerify, lblFieldToVerify = null;
							var myClstrCollection = null;
							var arrLblToUpperCase = new Array();

							/*
							 * Restituisce l'array per i canali
							 */
							var getChannelParameters = function() {
								var rtnrString = {
									'11' : '11',
									'12' : '12',
									'13' : '13',
									'14' : '14',
									'15' : '15',
									'16' : '16',
									'17' : '17',
									'18' : '18',
									'19' : '19',
									'20' : '20',
									'21' : '21',
									'22' : '22',
									'23' : '23',
									'24' : '24',
									'25' : '25',
									'26' : '26'
								};
								return rtnrString;
							};

							/*
							 * Restituisce l'array per il Device Type
							 */
							var getDeviceTypeParameters = function() {
								var rtnrString = {
									'COORDINATOR' : 'Coordinator',
									'ROUTER' : 'Router',
									'ENDDEVICE' : 'End Device'
								};
								return rtnrString;
							};

							/*
							 * Restituisce l'array per il Network Key Type
							 */
							var getNetworkKeyType = function() {
								var rtnrString = {
									'STANDARD' : 'Standard',
									'HIGH_SECURITY' : 'High Security'
								};
								return rtnrString;
							};

							var theOnEditFunction = function(rowid) {
								$("#btn_save_" + rowid + "_" + idTblOnFire)
										.show();
								$("#btn_cancel_" + rowid + "_" + idTblOnFire)
										.show();
								$("#btn_edit_" + rowid + "_" + idTblOnFire)
										.hide();
							};

							var displayRestoreButton = function(rowid) {
								$("#btn_save_" + rowid + "_" + idTblOnFire)
										.hide();
								$("#btn_cancel_" + rowid + "_" + idTblOnFire)
										.hide();
								$("#btn_edit_" + rowid + "_" + idTblOnFire)
										.show();
							};

							var displayEditButton = function(rowid) {
								$("#btn_save_" + rowid + "_" + idTblOnFire)
										.hide();
								$("#btn_cancel_" + rowid + "_" + idTblOnFire)
										.hide();
								$("#btn_edit_" + rowid + "_" + idTblOnFire)
										.show();
							};

							var startWithEditButton = function(rowId) {
								$("#btn_edit_" + rowId + "_tblManageNetwork1")
										.show();
								$("#btn_edit_" + rowId + "_tblManageNetwork2")
										.show();
								$("#btn_edit_" + rowId + "_tblManageNetwork3")
										.show();
								$("#btn_edit_" + rowId + "_tblManageNetwork4")
										.show();
								$("#btn_edit_" + rowId + "_tblManageNetwork5")
										.show();
							

								$("#btn_save_" + rowId + "_tblManageNetwork1")
										.hide();
								$("#btn_cancel_" + rowId + "_tblManageNetwork1")
										.hide();

								$("#btn_save_" + rowId + "_tblManageNetwork2")
										.hide();
								$("#btn_cancel_" + rowId + "_tblManageNetwork2")
										.hide();

								$("#btn_save_" + rowId + "_tblManageNetwork3")
										.hide();
								$("#btn_cancel_" + rowId + "_tblManageNetwork3")
										.hide();

								$("#btn_save_" + rowId + "_tblManageNetwork4")
										.hide();
								$("#btn_cancel_" + rowId + "_tblManageNetwork4")
										.hide();

								$("#btn_save_" + rowId + "_tblManageNetwork5")
										.hide();
								$("#btn_cancel_" + rowId + "_tblManageNetwork5")
										.hide();

								$("#btn_save_" + rowId + "_tblManageNetwork6")
										.hide();
								$("#btn_cancel_" + rowId + "_tblManageNetwork6")
										.hide();

								
								
								
								
								
								$("#btnStartGal").button("enable");
								$("#btnRestartGal1").button("enable");
								$("#btnRestartGal2").button("enable");
							
							}

							var aftersavefunc = function(rowId, response,
									options) {

								jQuery.each(arrLblToUpperCase,
										function(i, val) {
											var tmpValue = $('#' + idTblOnFire)
													.getCell(rowId, val);
											tmpValue = tmpValue.toUpperCase();
											tmpValue = tmpValue.replace(/0X/g,
													"0x");
											var rowData = jQuery(
													'#' + idTblOnFire).jqGrid(
													'setCell', rowId, val,
													tmpValue);
										});

								startWithEditButton(rowId);
								
							};

							var beforeSaveRow = function(options, rowId) {
								var rowData = jQuery('#' + idTblOnFire).jqGrid(
										'getRowData', rowId);

								
								if ((typeof rowData.cMask != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'cMask';
									fieldToVerify = LANG.networkManage.lblChannelMask;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									rtnObjConfig.channelMask = tmpValue;
								}
								if ((typeof rowData.dType != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'dType';
									fieldToVerify = LANG.networkManage.lblDeviceType;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									rtnObjConfig.channelMask = tmpValue;
								}
								if ((typeof rowData.nKey != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'nKey';
									fieldToVerify = LANG.networkManage.lblNetworkKey;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									tmpValue = verBigAddr(tmpValue,
											fieldToVerify);
									rtnObjConfig.networkKey = (tmpValue != null) ? tmpValue
											.toUpperCase()
											: rtnObjConfig.networkKey;
									arrLblToUpperCase.push(lblFieldToVerify);
								}
								if ((typeof rowData.nKeyType != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'nKeyType';
									fieldToVerify = LANG.networkManage.lblNetworkKeyType;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									rtnObjConfig.networkKeyType = tmpValue;
								}
								if ((typeof rowData.nManAddr != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'nManAddr';
									fieldToVerify = LANG.networkManage.lblNetworkManagerAddress;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									tmpValue = verShortAddr(tmpValue,
											fieldToVerify);
									rtnObjConfig.networkManagerAddress = (tmpValue != null) ? tmpValue
											.toUpperCase()
											: rtnObjConfig.networkManagerAddress;
									arrLblToUpperCase.push(lblFieldToVerify);
								}
								if ((typeof rowData.pId != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'pId';
									fieldToVerify = LANG.networkManage.lblPanId;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									tmpValue = verShortAddr(tmpValue,
											fieldToVerify);
									rtnObjConfig.panId = (tmpValue != null) ? tmpValue
											.toUpperCase()
											: rtnObjConfig.panId;
									arrLblToUpperCase.push(lblFieldToVerify);
								}
								if ((typeof rowData.pLinkK != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'pLinkK';
									fieldToVerify = LANG.networkManage.lblPreconfiguredLinkKey;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									tmpValue = verBigAddr(tmpValue,
											fieldToVerify);
									rtnObjConfig.preconfiguredLinkKey = (tmpValue != null) ? tmpValue
											.toUpperCase()
											: rtnObjConfig.preconfiguredLinkKey;
									arrLblToUpperCase.push(lblFieldToVerify);
								}
								if ((typeof rowData.sAddr != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'sAddr';
									fieldToVerify = LANG.networkManage.lblShortAddress;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									tmpValue = verShortAddr(tmpValue,
											fieldToVerify);
									rtnObjConfig.shortAddress = (tmpValue != null) ? tmpValue
											.toUpperCase()
											: rtnObjConfig.shortAddress;
									arrLblToUpperCase.push(lblFieldToVerify);
								}
								if ((typeof rowData.tCenterAddr != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'tCenterAddr';
									fieldToVerify = LANG.networkManage.lblTrustCenterAddress;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									tmpValue = verShortAddr(tmpValue,
											fieldToVerify);
									rtnObjConfig.trustCenterAddress = (tmpValue != null) ? tmpValue
											.toUpperCase()
											: rtnObjConfig.trustCenterAddress;
									arrLblToUpperCase.push(lblFieldToVerify);
								}
								if ((typeof rowData.tCentMasterK != 'undefined')
										&& (controlAllOk)) {
									lblFieldToVerify = 'tCentMasterK';
									fieldToVerify = LANG.networkManage.lblTrustCenterMasterKey;
									var dataValue = jQuery('#' + idTblOnFire)
											.jqGrid('getCol', lblFieldToVerify,
													true);
									var tmpValue = $(
											'#' + dataValue[0].id + '_'
													+ lblFieldToVerify).val();
									tmpValue = verBigAddr(tmpValue,
											fieldToVerify);
									rtnObjConfig.trustCenterMasterKey = (tmpValue != null) ? tmpValue
											.toUpperCase()
											: rtnObjConfig.trustCenterMasterKey;
									arrLblToUpperCase.push(lblFieldToVerify);
								}

								if (controlAllOk) {
									return true;
								} else {
									controlAllOk = true;
									return false;
								}
							};

							var editData = function(div, rowId) {
								idTblOnFire = div;

								if (idTblOnFire == 'tblManageNetwork1') {
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork2")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork3")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork4")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork5")
											.hide();
								}
								if (idTblOnFire == 'tblManageNetwork2') {
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork1")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork3")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork4")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork5")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork6")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork7")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork8")
											.hide();
								}
								if (idTblOnFire == 'tblManageNetwork3') {
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork1")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork2")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork4")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork5")
											.hide();
								}
								if (idTblOnFire == 'tblManageNetwork4') {
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork1")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork2")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork3")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork5")
											.hide();
								}
								if (idTblOnFire == 'tblManageNetwork5') {
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork1")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork2")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork3")
											.hide();
									$(
											"#btn_edit_" + rowId
													+ "_tblManageNetwork4")
											.hide();
								}

								$("#btnStartGal").button("disable");
								$("#btnRestartGal1").button("disable");
								$("#btnRestartGal2").button("disable");

								arrLblToUpperCase = new Array();
								controlSomeMod = false;
								fieldToVerify = null;
								jQuery('#' + div).jqGrid('editRow', rowId,
										true, theOnEditFunction);
							}

							var validateData = function(div, rowId) {
								idTblOnFire = div;
								controlSomeMod = true;
								saveparameters = {
									"successfunc" : null,
									"url" : 'clientArray',
									"extraparam" : {},
									"beforeSaveRow" : beforeSaveRow,
									"aftersavefunc" : aftersavefunc,
									"errorfunc" : null,
									"afterrestorefunc" : null,
									"restoreAfterError" : true
								};
								jQuery('#' + div).jqGrid('saveRow', rowId,
										saveparameters);
							};

							var restoreData = function(div, rowId) {
								idTblOnFire = div;
								jQuery('#' + div).jqGrid('restoreRow', rowId,
										displayEditButton);

								startWithEditButton(rowId);
							}

							var myNMMenu = new jGGNetworkManageMenu();
							myNMMenu.newButton('btnStartGal', null, null);
							myNMMenu.newButton('btnRestartGal1', null, null);
							myNMMenu.newButton('btnRestartGal2', null, null);
							//myNMMenu.newButton('btnRestartGal3', null, null);

							var timeout = '00002710';
							$
									.ajax(
											{
												url : DEFINEPATH.infoForRestartGal
														+ "timeout="
														+ timeout
														+ "&index=00"
											})
									.done(
											function(data) {
												var dataBig = json_parse(data);
												rtnObjConfig = dataBig.detail.startupAttributeInfo;

												tmpObjConfig.cMask = rtnObjConfig.channelMask;
												tmpObjConfig.dType = rtnObjConfig.deviceType;
												tmpObjConfig.nKey = padVector(
														rtnObjConfig.networkKey)
														.trim();
												tmpObjConfig.nKeyType = rtnObjConfig.networkKeyType;
												tmpObjConfig.nManAddr = '0x'
														+ padLeft(
																4,
																rtnObjConfig.networkManagerAddress
																		.toString(16))
																.toUpperCase()
																.trim();
												tmpObjConfig.pId = '0x'
														+ padLeft(
																4,
																rtnObjConfig.panId
																		.toString(16))
																.toUpperCase()
																.trim();
												tmpObjConfig.pLinkK = padVector(
														rtnObjConfig.preconfiguredLinkKey)
														.trim();
												tmpObjConfig.sAddr = '0x'
														+ padLeft(
																4,
																rtnObjConfig.shortAddress
																		.toString(16))
																.toUpperCase()
																.trim();
												tmpObjConfig.tCenterAddr = '0x'
														+ padLeft(
																4,
																rtnObjConfig.trustCenterAddress
																		.toString(16))
																.toUpperCase()
																.trim();
												tmpObjConfig.tCentMasterK = padVector(
														rtnObjConfig.trustCenterMasterKey)
														.trim();

												var mydataViewDevice1 = new Array();
												var mydataViewDevice2 = new Array();
												var mydataViewDevice3 = new Array();
												var mydataViewDevice4 = new Array();
												var mydataViewDevice5 = new Array();

												mydataViewDevice1.push({
													cMask : tmpObjConfig.cMask,
													dType : tmpObjConfig.dType
												});
												mydataViewDevice2.push({
													nKey : tmpObjConfig.nKey
												});
												mydataViewDevice3
														.push({
															nKeyType : tmpObjConfig.nKeyType,
															nManAddr : tmpObjConfig.nManAddr,
															pId : tmpObjConfig.pId
														});
												mydataViewDevice4
														.push({
															pLinkK : tmpObjConfig.pLinkK,
															sAddr : tmpObjConfig.sAddr
														});
												mydataViewDevice5
														.push({
															tCenterAddr : tmpObjConfig.tCenterAddr,
															tCentMasterK : tmpObjConfig.tCentMasterK
														});

												$("#tblManageNetwork1")
														.jqGrid(
																{
																	rowNum : 10000,
																	datatype : "local",
																	colNames : [
																			LANG.networkManage.lblChannelMask,
																			LANG.networkManage.lblDeviceType ], //'Actions', 
																	colModel : [ //{name:'act',index:'act', width:53,sortable:false}, 
																			{
																				name : 'cMask',
																				index : 'cMask',
																				width : 90,
																				align : "center",
																				sortable : false,
																				editable : true,
																				cellEdit : true,
																				edittype : 'select',
																				formatter : 'select',
																				editrules : {
																					required : true
																				},
																				editoptions : {
																					value : getChannelParameters()
																				}
																			},//LOAD ALL THE KPI PARAMETER KEY-VALUE PAIR
																			{
																				name : 'dType',
																				index : 'dType',
																				width : 120,
																				align : "center",
																				sortable : false,
																				editable : true,
																				cellEdit : true,
																				edittype : 'select',
																				formatter : 'select',
																				editrules : {
																					required : true
																				},
																				editoptions : {
																					value : getDeviceTypeParameters()
																				}
																			} ],
																	viewrecords : true,
																	autowidth : true,
																	caption : null,
																	subGrid : false,
																	height : "auto"
																});

												
												
												$("#tblManageNetwork2")
														.jqGrid(
																{
																
																	rowNum : 10000,
																	datatype : "local",
																	colNames : [ LANG.networkManage.lblNetworkKey ], //'Actions', 
																	colModel : [ //{name:'act',index:'act', width:53, sortable:false}, 
																	{
																		name : 'nKey',
																		width : 210,
																		editable : true,
																		cellEdit : true,
																		sortable : false,
																		editrules : {
																			required : true
																		},
																		align : "center"
																	} ],
																	viewrecords : true,
																	caption : null, //LANG.menu.btnManageNetwork,
																	autowidth : true,
																	subGrid : false,
																	height : "auto"/*,
																									          gridComplete: function(){
																										      	  	var ids = jQuery("#tblManageNetwork2").jqGrid('getDataIDs');
																										      	  	if (ids.length > 0){
																											      		for(var i=0;i < ids.length;i++){ 
																											      			var rowId = ids[i];
																											      			ae = "<div style='text-align: center;'>";
																											      			be = "	<input style='height:22px;width:70px;' type='button' id='btn_edit_" + rowId + "_tblManageNetwork2' value='Edit' onclick=\"editData('tblManageNetwork2', '"+rowId+"');\"  />"; 
																											    			se = "	<input style='height:22px;width:70px;' type='button' id='btn_save_" + rowId + "_tblManageNetwork2' value='Save' onclick=\"validateData('tblManageNetwork2', '"+rowId+"');\"  />";  
																											    			ce = "	<input style='height:22px;width:70px;' type='button' id='btn_cancel_" + rowId + "_tblManageNetwork2' value='Cancel' onclick=\"restoreData('tblManageNetwork2', '"+rowId+"');\" />"; 
																											    			de = "</div>"; 
																											      			jQuery("#tblManageNetwork2").jqGrid('setRowData', rowId, {act:ae+be+se+ce+de});
																											      		}	
																										      	  	}
																										      	  }*/
																});

												$("#tblManageNetwork3")
														.jqGrid(
																{
																	
																	rowNum : 10000,
																	datatype : "local",
																	colNames : [
																			LANG.networkManage.lblNetworkKeyType,
																			LANG.networkManage.lblNetworkManagerAddress,
																			LANG.networkManage.lblPanId ], //'Actions', 
																	colModel : [ //{name:'act',index:'act', width:53, sortable:false}, 
																			{
																				name : 'nKeyType',
																				width : 80,
																				align : "center",
																				sortable : false,
																				editable : true,
																				cellEdit : true,
																				edittype : 'select',
																				formatter : 'select',
																				editrules : {
																					required : true
																				},
																				editoptions : {
																					value : getNetworkKeyType()
																				}
																			},
																			{
																				name : 'nManAddr',
																				width : 80,
																				editable : true,
																				cellEdit : true,
																				sortable : false,
																				editrules : {
																					required : true
																				},
																				align : "center"
																			},
																			{
																				name : 'pId',
																				width : 45,
																				editable : true,
																				cellEdit : true,
																				sortable : false,
																				editrules : {
																					required : true
																				},
																				align : "center"
																			} ],
																	viewrecords : true,
																	caption : null, //LANG.menu.btnManageNetwork,
																	autowidth : true,
																	subGrid : false,
																	height : "auto"/*,
																									          gridComplete: function(){
																										      	  	var ids = jQuery("#tblManageNetwork3").jqGrid('getDataIDs');
																										      	  	if (ids.length > 0){
																											      		for(var i=0;i < ids.length;i++){
																											      			var rowId = ids[i];
																											      			ae = "<div style='text-align: center;'>";
																											      			be = "	<input style='height:22px;width:70px;' type='button' id='btn_edit_" + rowId + "_tblManageNetwork3' value='Edit' onclick=\"editData('tblManageNetwork3', '"+rowId+"');\"  />"; 
																											    			se = "	<input style='height:22px;width:70px;' type='button' id='btn_save_" + rowId + "_tblManageNetwork3' value='Save' onclick=\"validateData('tblManageNetwork3', '"+rowId+"');\"  />";  
																											    			ce = "	<input style='height:22px;width:70px;' type='button' id='btn_cancel_" + rowId + "_tblManageNetwork3' value='Cancel' onclick=\"restoreData('tblManageNetwork3', '"+rowId+"');\" />"; 
																											    			de = "</div>"; 
																											      			jQuery("#tblManageNetwork3").jqGrid('setRowData', rowId, {act:ae+be+se+ce+de});
																											      		}	
																										      	  	}
																										      	  }*/
																});

												$("#tblManageNetwork4")
														.jqGrid(
																{
																	
																	rowNum : 10000,
																	datatype : "local",
																	colNames : [
																			LANG.networkManage.lblPreconfiguredLinkKey,
																			LANG.networkManage.lblShortAddress ], //'Actions', 
																	colModel : [ //{name:'act',index:'act', width:54, sortable:false}, 
																			{
																				name : 'pLinkK',
																				width : 170,
																				editable : true,
																				cellEdit : true,
																				sortable : false,
																				editrules : {
																					required : true
																				},
																				align : "center"
																			},
																			{
																				name : 'sAddr',
																				width : 40,
																				editable : true,
																				cellEdit : true,
																				sortable : false,
																				editrules : {
																					required : true
																				},
																				align : "center"
																			} ],
																	viewrecords : true,
																	caption : null, //LANG.menu.btnManageNetwork,
																	autowidth : true,
																	subGrid : false,
																	height : "auto"/*,
																									          gridComplete: function(){
																										      	  	var ids = jQuery("#tblManageNetwork4").jqGrid('getDataIDs');
																										      	  	if (ids.length > 0){
																											      		for(var i=0;i < ids.length;i++){
																											      			var rowId = ids[i];
																											      			ae = "<div style='text-align: center;'>";
																											      			be = "	<input style='height:22px;width:70px;' type='button' id='btn_edit_" + rowId + "_tblManageNetwork4' value='Edit' onclick=\"editData('tblManageNetwork4', '"+rowId+"');\"  />"; 
																											    			se = "	<input style='height:22px;width:70px;' type='button' id='btn_save_" + rowId + "_tblManageNetwork4' value='Save' onclick=\"validateData('tblManageNetwork4', '"+rowId+"');\"  />";  
																											    			ce = "	<input style='height:22px;width:70px;' type='button' id='btn_cancel_" + rowId + "_tblManageNetwork4' value='Cancel' onclick=\"restoreData('tblManageNetwork4', '"+rowId+"');\" />"; 
																											    			de = "</div>"; 
																											      			jQuery("#tblManageNetwork4").jqGrid('setRowData', rowId, {act:ae+be+se+ce+de});
																											      		}	
																										      	  	}
																									      	  	}*/
																});

												$("#tblManageNetwork5")
														.jqGrid(
																{
																	
																	rowNum : 10000,
																	datatype : "local",
																	colNames : [
																			LANG.networkManage.lblTrustCenterAddress,
																			LANG.networkManage.lblTrustCenterMasterKey ], //'Actions', 
																	colModel : [ //{name:'act',index:'act', width:52, sortable:false}, 
																			{
																				name : 'tCenterAddr',
																				width : 60,
																				editable : true,
																				cellEdit : true,
																				sortable : false,
																				editrules : {
																					required : true
																				},
																				align : "center"
																			},
																			{
																				name : 'tCentMasterK',
																				width : 140,
																				editable : true,
																				cellEdit : true,
																				sortable : false,
																				editrules : {
																					required : true
																				},
																				align : "center"
																			} ],
																	viewrecords : true,
																	caption : null, //LANG.menu.btnManageNetwork,
																	autowidth : true,
																	subGrid : false,
																	height : "auto"
																});
												

												reloadGridFromLocalArray(
														"tblManageNetwork1",
														mydataViewDevice1);
												reloadGridFromLocalArray(
														"tblManageNetwork2",
														mydataViewDevice2);
												reloadGridFromLocalArray(
														"tblManageNetwork3",
														mydataViewDevice3);
												reloadGridFromLocalArray(
														"tblManageNetwork4",
														mydataViewDevice4);
												reloadGridFromLocalArray(
														"tblManageNetwork5",
														mydataViewDevice5);
											
												$(
														"#btn_save_1_tblManageNetwork1")
														.hide();
												$(
														"#btn_cancel_1_tblManageNetwork1")
														.hide();

												$(
														"#btn_save_1_tblManageNetwork2")
														.hide();
												$(
														"#btn_cancel_1_tblManageNetwork2")
														.hide();

												$(
														"#btn_save_1_tblManageNetwork3")
														.hide();
												$(
														"#btn_cancel_1_tblManageNetwork3")
														.hide();

												$(
														"#btn_save_1_tblManageNetwork4")
														.hide();
												$(
														"#btn_cancel_1_tblManageNetwork4")
														.hide();

												$(
														"#btn_save_1_tblManageNetwork5")
														.hide();
												$(
														"#btn_cancel_1_tblManageNetwork5")
														.hide();

												
											});

							

							var fchangeStatuGal = function(buttonInHeaderPressed) {
								$.jStorage.set("ChannelRadioValue", null);
								//event.preventDefault();
								var timeout, startMode, url, type, errorMsg = '';
								rtnObjConfig.channelMask = tmpObjConfig.cMask;
								rtnObjConfig.deviceType = tmpObjConfig.dType;
								rtnObjConfig.networkKey = padVectorInverse(
										tmpObjConfig.nKey).trim();
								rtnObjConfig.networkKeyType = tmpObjConfig.nKeyType;
								rtnObjConfig.networkManagerAddress = padLeftInverse(tmpObjConfig.nManAddr);
								rtnObjConfig.panId = padLeftInverse(tmpObjConfig.pId);
								rtnObjConfig.preconfiguredLinkKey = padVectorInverse(
										tmpObjConfig.pLinkK).trim();
								rtnObjConfig.shortAddress = padLeftInverse(tmpObjConfig.sAddr);
								rtnObjConfig.trustCenterAddress = padLeftInverse(tmpObjConfig.tCenterAddr);
								rtnObjConfig.trustCenterMasterKey = padVectorInverse(
										tmpObjConfig.tCentMasterK).trim();

								var objToSend = {
									startupAttributeInfo : ''
								};
								objToSend.startupAttributeInfo = rtnObjConfig;
								var data = JSON.stringify(objToSend);

								switch (buttonInHeaderPressed) {
								case 'btnStartGal':
									type = 'POST';
									timeout = '00002710';
									url = DEFINEPATH.startGalPath + "timeout="
											+ timeout + "&start=true";
									errorMsg = 'Error in start mode: ';
									break;
								case 'btnRestartGal1':
									type = 'GET';
									startMode = '00';
									timeout = '00002710';
									url = DEFINEPATH.reStartGalPath
											+ "timeout=" + timeout
											+ "&startMode=" + startMode;
									errorMsg = 'Error in restart in Association mode: ';
									break;
								case 'btnRestartGal2':
									type = 'GET';
									startMode = '01';
									timeout = '00002710';
									url = DEFINEPATH.reStartGalPath
											+ "timeout=" + timeout
											+ "&startMode=" + startMode;
									errorMsg = 'Error in restart in NVM mode: ';
									break;
								
								}

								$
										.ajax(
												{
													type : type,
													data : data,
													url : url,
													contentType : "application/json; charset=utf-8"
												})
										.done(
												function(data) {
													var dataBig = json_parse(data);
													if (dataBig.status.code == 0) {
														$
																.ajax(
																		{
																			dataType : "json",
																			url : DEFINEPATH.channelPath
																		})
																.done(
																		function(
																				data) {

																			if (data.status.code == 0) {
																				//Tutto ok
																				var chR = data.detail.value[0];
																				$.jStorage
																						.set(
																								"ChannelRadioValue",
																								chR);
																				$(
																						'#spChannelRadioHP')
																						.text(
																								chR);
																				$(
																						'#spZigBeeState')
																						.text(
																								'RUNNING')
																						.css(
																								'color',
																								'green');
																			} else {
																				//Visualizzo il messaggi odi errore
																				$.jStorage
																						.set(
																								"ChannelRadioError",
																								data.status.message);
																				$(
																						'#spChannelRadioHP')
																						.text(
																								data.status.message);
																				$(
																						'#spZigBeeState')
																						.text(
																								'NOT RUNNING')
																						.css(
																								'color',
																								'red');
																			}
																		});
														alert("Operation done!");

													} else {
														alert(errorMsg
																+ dataBig.status.message);
													}
												});

							}

							$('#btnRestartGal1').click(function(event) {
								var result = window.confirm('Resetting the ZigBee network causes removal of all devices. Are you really sure you want to reset?','Total reset',function(result) {if (result) {fchangeStatuGal('btnRestartGal1');}});
							});
							$('#btnStartGal').click(function(event) {fchangeStatuGal('btnStartGal');});
							$('#btnRestartGal2').click(function(event) {fchangeStatuGal('btnRestartGal2');});
							
										 
							
								
							
						});
	</script>

	<div id="container">
		<table id="tblManageNetwork1"></table>
		<table id="tblManageNetwork2"></table>
		<table id="tblManageNetwork3"></table>
		<table id="tblManageNetwork4"></table>
		<table id="tblManageNetwork5"></table>
	
		<input type="button" id="btnStartGal" class="tnHeaderHome2" title="Start" />
		<input type="button" id="btnRestartGal1" class="tnHeaderHome2" title="Total reset" />
		<input type="button" id="btnRestartGal2" class="tnHeaderHome2" title="Stop" />

	</div>
</div>